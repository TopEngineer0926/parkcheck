{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeLinearGradient = _interopRequireDefault(require(\"react-native-linear-gradient\"));\n\nvar _geolocation = _interopRequireDefault(require(\"@react-native-community/geolocation\"));\n\nvar _reactNativeI18nLocalize = require(\"react-native-i18n-localize\");\n\nvar _reactNativeIndicator = require(\"react-native-indicator\");\n\nvar _FontAwesome = _interopRequireDefault(require(\"react-native-vector-icons/FontAwesome\"));\n\nvar _fetch = require(\"../fetch\");\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Works\\\\Workspace\\\\Mobile\\\\parkcheck-android-app-master\\\\parkcheck-android-app-master\\\\src\\\\screens\\\\UserInfo.js\";\n\nvar UserInfo = function UserInfo(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = (0, _react.useState)(''),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      gps_status_lati = _useState2[0],\n      setGpsStatusLati = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(''),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      gps_status_long = _useState4[0],\n      setGpsStatusLong = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var gpsTest = function gpsTest() {\n    _geolocation.default.getCurrentPosition(function (position) {\n      var location = position;\n      var latitude = position.coords.latitude;\n      var longitude = position.coords.longitude;\n      var la_direction, lo_direction;\n      var degree, minute, second;\n      if (latitude > 0) la_direction = 'N';else {\n        la_direction = 'S';\n        latitude = -latitude;\n      }\n      if (longitude > 0) lo_direction = 'E';else {\n        lo_direction = 'W';\n        longitude = -longitude;\n      }\n      degree = Math.floor(latitude);\n      latitude = (latitude - degree) * 60;\n      minute = Math.floor(latitude);\n      second = Math.floor((latitude - minute) * 60000) / 1000;\n      latitude = degree + \"°\" + minute + \"'\" + second + '\"';\n      degree = Math.floor(longitude);\n      longitude = (longitude - degree) * 60;\n      minute = Math.floor(longitude);\n      second = Math.floor((longitude - minute) * 60000) / 1000;\n      longitude = degree + \"°\" + minute + \"'\" + second + '\"';\n      var result = latitude + la_direction + '\\n' + longitude + lo_direction;\n      setGpsStatusLati(latitude + la_direction);\n      setGpsStatusLong(longitude + lo_direction);\n    }, function (error) {\n      setGpsStatusLati(_reactNativeI18nLocalize.i18n.t('no_connect_gps'));\n      setGpsStatusLong('');\n    }, {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 1000\n    });\n  };\n\n  var gotoCreate = function gotoCreate(data) {\n    setLoading(false);\n    navigation.navigate('CreateViolation', {\n      headerTitle: _reactNativeI18nLocalize.i18n.t('create_violation'),\n      type: 'create',\n      autoID: data.autoID,\n      triggers: data.triggers,\n      locations: data.locations,\n      customerID: route.params.customerID,\n      clerk: route.params.clerk\n    });\n  };\n\n  var gotoScan = function gotoScan() {\n    navigation.navigate('Scanscreen', {\n      customerID: route.params.customerID,\n      clerk: route.params.clerk\n    });\n  };\n\n  var failedConnect = function failedConnect() {\n    setLoading(false);\n\n    _reactNative.Alert.alert(_reactNativeI18nLocalize.i18n.t('warn'), _reactNativeI18nLocalize.i18n.t('not_connect_server'), [{\n      text: _reactNativeI18nLocalize.i18n.t('ok')\n    }]);\n  };\n\n  var CreateViolation = function CreateViolation() {\n    setLoading(true);\n    var formData = new FormData();\n    formData.append('customerID', route.params.customerID);\n    formData.append('clerk', route.params.clerk);\n    (0, _fetch.MyFetch)(25, fetch('http://150.95.129.109/wp-json/violation/create', {\n      method: 'POST',\n      body: formData\n    })).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      gotoCreate(json);\n    }).catch(function (error) {\n      console.log(error);\n      failedConnect();\n    });\n  };\n\n  (0, _react.useEffect)(function () {\n    return gpsTest();\n  });\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.main,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.topPart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.maintitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, _reactNativeI18nLocalize.i18n.t('parkcheck'), ' ', _reactNativeI18nLocalize.i18n.t('switzerland')), _react.default.createElement(_reactNative.Text, {\n    style: styles.maintitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, _reactNativeI18nLocalize.i18n.t('parking_administration'))), _react.default.createElement(_reactNative.View, {\n    style: styles.userinfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.infoitem,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.infoTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('customer_id'), \":\"), _react.default.createElement(_reactNative.Text, {\n    style: styles.infotext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, route.params.customerID)), _react.default.createElement(_reactNative.View, {\n    style: styles.infoitem,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.infoTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('cleark'), \":\"), _react.default.createElement(_reactNative.Text, {\n    style: styles.infotext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, route.params.clerk)), _react.default.createElement(_reactNative.View, {\n    style: styles.infoitem,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.infoTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('gps'), \":\"), _react.default.createElement(_reactNative.View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.gpsText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }, gps_status_lati), _react.default.createElement(_reactNative.Text, {\n    style: styles.gpsText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, gps_status_long))))), _react.default.createElement(_reactNative.View, {\n    style: styles.buttonGroup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.TouchableOpacity, {\n    style: styles.button_item_create,\n    activeOpacity: .5,\n    onPress: function onPress() {\n      return CreateViolation();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNativeLinearGradient.default, {\n    start: {\n      x: 0,\n      y: 0.75\n    },\n    end: {\n      x: 1,\n      y: 0.25\n    },\n    colors: ['#2974FA', '#2974FA', '#2974FA'],\n    style: styles.gradient,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('create_violation')))), _react.default.createElement(_reactNative.TouchableOpacity, {\n    style: styles.button_item_create,\n    activeOpacity: .5,\n    onPress: function onPress() {\n      return gotoScan();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNativeLinearGradient.default, {\n    start: {\n      x: 0,\n      y: 0.75\n    },\n    end: {\n      x: 1,\n      y: 0.25\n    },\n    colors: ['#2974FA', '#2974FA', '#2974FA'],\n    style: styles.gradient,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('qr_code_scan')))), _react.default.createElement(_reactNative.TouchableOpacity, {\n    style: styles.button_item_create,\n    activeOpacity: .5,\n    onPress: function onPress() {\n      return navigation.navigate('History', {\n        headerTitle: _reactNativeI18nLocalize.i18n.t('history'),\n        clerk: route.params.clerk\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNativeLinearGradient.default, {\n    start: {\n      x: 0,\n      y: 0.75\n    },\n    end: {\n      x: 1,\n      y: 0.25\n    },\n    colors: ['#2974FA', '#2974FA', '#2974FA'],\n    style: styles.gradient,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('vio_history'))))), loading && _react.default.createElement(_reactNative.View, {\n    style: styles.loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNativeIndicator.BubblesLoader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  })));\n};\n\nvar _default = UserInfo;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  main: {\n    flex: 1,\n    padding: 30,\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  topPart: {\n    flex: 3,\n    position: 'relative'\n  },\n  buttonGroup: {\n    flex: 1.7,\n    alignItems: 'center'\n  },\n  button_item_create: {\n    height: 50,\n    width: '90%',\n    shadowColor: '#ccc',\n    marginBottom: 15\n  },\n  button_item_out: {\n    height: 50,\n    width: '50%',\n    shadowColor: '#ccc',\n    marginBottom: 10\n  },\n  text: {\n    color: 'white',\n    fontSize: 23\n  },\n  gradient: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    height: '100%'\n  },\n  title: {\n    alignItems: 'center',\n    marginTop: 15\n  },\n  maintitle: {\n    fontSize: 25\n  },\n  userinfo: {\n    marginTop: 50\n  },\n  infoitem: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  infotext: {\n    fontSize: 20,\n    width: '55%'\n  },\n  gpsText: {\n    fontSize: 20,\n    textAlign: 'right'\n  },\n  infoTitle: {\n    width: '45%',\n    fontSize: 20\n  },\n  loading: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(97, 97, 97, 0.2)'\n  },\n  iconHistory: {\n    position: 'absolute',\n    right: 0,\n    top: 0\n  }\n});","map":{"version":3,"sources":["D:/Works/Workspace/Mobile/parkcheck-android-app-master/parkcheck-android-app-master/src/screens/UserInfo.js"],"names":["UserInfo","navigation","route","gps_status_lati","setGpsStatusLati","gps_status_long","setGpsStatusLong","loading","setLoading","gpsTest","Geolocation","getCurrentPosition","position","location","latitude","coords","longitude","la_direction","lo_direction","degree","minute","second","Math","floor","result","error","i18n","t","enableHighAccuracy","timeout","maximumAge","gotoCreate","data","navigate","headerTitle","type","autoID","triggers","locations","customerID","params","clerk","gotoScan","failedConnect","Alert","alert","text","CreateViolation","formData","FormData","append","fetch","method","body","then","response","json","catch","console","log","styles","main","topPart","title","maintitle","userinfo","infoitem","infoTitle","infotext","gpsText","buttonGroup","button_item_create","x","y","gradient","StyleSheet","create","flex","padding","flexDirection","justifyContent","alignItems","height","width","shadowColor","marginBottom","button_item_out","color","fontSize","borderRadius","marginTop","display","textAlign","left","right","top","bottom","backgroundColor","iconHistory"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n} from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport Geolocation from '@react-native-community/geolocation';\nimport { i18n } from 'react-native-i18n-localize';\nimport { BubblesLoader } from 'react-native-indicator';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { MyFetch } from '../fetch';\n\nconst UserInfo = ({ navigation, route }) => {\n\n\n  const [gps_status_lati, setGpsStatusLati] = useState('');\n  const [gps_status_long, setGpsStatusLong] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const gpsTest = () => {\n\n    Geolocation.getCurrentPosition(\n      position => {\n        const location = position;\n\n        let latitude = position.coords.latitude;\n        let longitude = position.coords.longitude;\n        let la_direction, lo_direction;\n        let degree, minute, second;\n        if (latitude > 0)\n          la_direction = 'N'\n        else {\n          la_direction = 'S';\n          latitude = -latitude;\n        }\n\n        if (longitude > 0)\n          lo_direction = 'E'\n        else {\n          lo_direction = 'W'\n          longitude = -longitude;\n        }\n\n        degree = Math.floor(latitude);\n        latitude = (latitude - degree) * 60;\n        minute = Math.floor(latitude);\n        second = Math.floor((latitude - minute) * 60000) / 1000;\n        latitude = degree + \"°\" + minute + \"'\" + second + '\"';\n\n        degree = Math.floor(longitude);\n        longitude = (longitude - degree) * 60;\n        minute = Math.floor(longitude);\n        second = Math.floor((longitude - minute) * 60000) / 1000;\n        longitude = degree + \"°\" + minute + \"'\" + second + '\"';\n\n        const result = latitude + la_direction + '\\n' + longitude + lo_direction;\n        setGpsStatusLati(latitude + la_direction);\n        setGpsStatusLong(longitude + lo_direction);\n\n      },\n      error => {setGpsStatusLati(i18n.t('no_connect_gps'));setGpsStatusLong('')},\n      { enableHighAccuracy: true, timeout: 5000, maximumAge: 1000 }\n    );\n  }\n\n  const gotoCreate = (data) => {\n    setLoading(false);\n    navigation.navigate('CreateViolation',\n      {\n        headerTitle: i18n.t('create_violation'),\n        type: 'create',\n        autoID: data.autoID,\n        triggers: data.triggers,\n        locations: data.locations,\n        customerID: route.params.customerID,\n        clerk: route.params.clerk\n      }\n    );\n  }\n\n  const gotoScan = () => {\n    navigation.navigate('Scanscreen',\n      {\n        customerID: route.params.customerID,\n        clerk: route.params.clerk\n      })\n  }\n\n  const failedConnect = () => {\n    setLoading(false);\n\n    Alert.alert(\n      i18n.t('warn'),\n      i18n.t('not_connect_server'),\n      [{ text: i18n.t('ok'), },]\n    );\n  }\n\n  const CreateViolation = () => {\n\n    setLoading(true);\n\n    const formData = new FormData();\n    formData.append('customerID', route.params.customerID);\n    formData.append('clerk', route.params.clerk);\n\n    MyFetch(25, fetch('http://150.95.129.109/wp-json/violation/create', {\n      method: 'POST',\n      body: formData\n    })).then((response) => response.json())\n      .then((json) => { gotoCreate(json); })\n      .catch((error) => {\n        console.log(error);\n        failedConnect();\n      })\n\n  }\n\n  useEffect(() => gpsTest());\n\n  return (\n    <View style={styles.main}>\n      <View style={styles.topPart}>\n        <View style={styles.title}>\n          <Text style={styles.maintitle}>\n            {i18n.t('parkcheck')}{' '}{i18n.t('switzerland')}\n          </Text>\n          <Text style={styles.maintitle}>\n            {i18n.t('parking_administration')}\n          </Text>\n        </View>\n        <View style={styles.userinfo}>\n          <View style={styles.infoitem}>\n            <Text style={styles.infoTitle}>\n              {i18n.t('customer_id')}:\n              </Text>\n            <Text style={styles.infotext}>\n              {route.params.customerID}\n            </Text>\n          </View>\n          <View style={styles.infoitem}>\n            <Text style={styles.infoTitle}>\n              {i18n.t('cleark')}:\n              </Text>\n            <Text style={styles.infotext}>\n              {route.params.clerk}\n            </Text>\n          </View>\n          <View style={styles.infoitem}>\n            <Text style={styles.infoTitle}>\n              {i18n.t('gps')}:\n              </Text>\n            <View>\n              <Text style={styles.gpsText}>{gps_status_lati}</Text>\n              <Text style={styles.gpsText}>{gps_status_long}</Text>\n            </View>\n          </View>\n        </View>\n      </View>\n      <View style={styles.buttonGroup}>\n        <TouchableOpacity\n          style={styles.button_item_create}\n          activeOpacity={.5}\n          onPress={() => CreateViolation()}>\n          <LinearGradient start={{ x: 0, y: 0.75 }} end={{ x: 1, y: 0.25 }} colors={['#2974FA', '#2974FA', '#2974FA']} style={styles.gradient}>\n            <Text style={styles.text}>{i18n.t('create_violation')}</Text>\n          </LinearGradient>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={styles.button_item_create}\n          activeOpacity={.5}\n          onPress={() => gotoScan()}\n        >\n          <LinearGradient start={{ x: 0, y: 0.75 }} end={{ x: 1, y: 0.25 }} colors={['#2974FA', '#2974FA', '#2974FA']} style={styles.gradient}>\n            <Text style={styles.text}>{i18n.t('qr_code_scan')}</Text>\n          </LinearGradient>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={styles.button_item_create}\n          activeOpacity={.5}\n          onPress={() => navigation.navigate('History', { headerTitle: i18n.t('history'), clerk: route.params.clerk })}\n        >\n          <LinearGradient start={{ x: 0, y: 0.75 }} end={{ x: 1, y: 0.25 }} colors={['#2974FA', '#2974FA', '#2974FA']} style={styles.gradient}>\n            <Text style={styles.text}>{i18n.t('vio_history')}</Text>\n          </LinearGradient>\n        </TouchableOpacity>\n      </View>\n      {loading &&\n        <View style={styles.loading}>\n          <BubblesLoader />\n        </View>\n      }\n    </View>\n  );\n}\n\nexport default UserInfo;\n\n\nconst styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    padding: 30,\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  topPart: {\n    flex: 3,\n    position: 'relative'\n  },\n  buttonGroup: {\n    flex: 1.7,\n    alignItems: 'center'\n  },\n  button_item_create: {\n    height: 50,\n    width: '90%',\n    shadowColor: '#ccc',\n    marginBottom: 15\n  },\n  button_item_out: {\n    height: 50,\n    width: '50%',\n    shadowColor: '#ccc',\n    marginBottom: 10\n  },\n  text: {\n    color: 'white',\n    fontSize: 23\n  },\n  gradient: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    height: '100%'\n  },\n  title: {\n    alignItems: 'center',\n    marginTop: 15\n  },\n  maintitle: {\n    fontSize: 25\n  },\n  userinfo: {\n    marginTop: 50\n  },\n  infoitem: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  infotext: {\n    fontSize: 20,\n    width: '55%'\n  },\n  gpsText: {\n    fontSize: 20,\n    textAlign: 'right'\n  },  \n  infoTitle: {\n    width: '45%',\n    fontSize: 20\n  },\n  loading: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(97, 97, 97, 0.2)'\n  },\n  iconHistory: {\n    position: 'absolute',\n    right: 0,\n    top: 0\n  }\n\n});\n\n\n"]},"metadata":{},"sourceType":"script"}