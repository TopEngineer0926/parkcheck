{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeI18nLocalize = require(\"react-native-i18n-localize\");\n\nvar _mDatePicker = _interopRequireDefault(require(\"../components/mDatePicker\"));\n\nvar _FontAwesome = _interopRequireDefault(require(\"react-native-vector-icons/FontAwesome\"));\n\nvar _reactNativeIndicator = require(\"react-native-indicator\");\n\nvar _fetch = require(\"../fetch\");\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Works\\\\Workspace\\\\Mobile\\\\parkcheck-android-app-master\\\\parkcheck-android-app-master\\\\src\\\\screens\\\\History.js\";\n\nvar History = function History(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = (0, _react.useState)(''),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      dateFrom = _useState2[0],\n      onDateFromchange = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(''),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      dateTo = _useState4[0],\n      onDateTochange = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      vioList = _useState6[0],\n      setVioList = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var temp = {\n    violationID: '0300400903740',\n    location: 'Abendweg 1004 Lausanne street cannnde',\n    trigger: 'trigger temp',\n    createdTime: '11.08.2020 20:21'\n  };\n\n  var loadFromServer = function loadFromServer() {\n    setLoading(true);\n    var formData = new FormData();\n    formData.append('clerk', route.params.clerk);\n    formData.append('fromDate', dateFrom.split(\".\").reverse().join(\"-\"));\n    formData.append('toDate', dateTo.split(\".\").reverse().join(\"-\"));\n    (0, _fetch.MyFetch)(50, fetch('http://150.95.129.109/wp-json/violation/history', {\n      method: 'POST',\n      body: formData\n    })).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      showList(json);\n    }).catch(function (error) {\n      console.log(error);\n      failedConnect();\n    });\n  };\n\n  var showList = function showList(data) {\n    setLoading(false);\n    if (data.vioList.length == 0) setVioList(null);else setVioList(data.vioList);\n  };\n\n  var failedConnect = function failedConnect() {\n    setLoading(false);\n\n    _reactNative.Alert.alert(_reactNativeI18nLocalize.i18n.t('warn'), _reactNativeI18nLocalize.i18n.t('not_connect_server'), [{\n      text: _reactNativeI18nLocalize.i18n.t('ok')\n    }]);\n  };\n\n  var pressLoad = function pressLoad() {\n    var fromD = new Date(dateFrom.split(\".\").reverse().join(\"-\"));\n    var toD = new Date(dateTo.split(\".\").reverse().join(\"-\"));\n    var diff = fromD.getTime() - toD.getTime();\n    if (diff > 0) _reactNative.Alert.alert(_reactNativeI18nLocalize.i18n.t('warn'), _reactNativeI18nLocalize.i18n.t('check_date'), [{\n      text: _reactNativeI18nLocalize.i18n.t('ok')\n    }]);else {\n      loadFromServer();\n    }\n  };\n\n  var contentList = vioList && vioList.map(function (item, index) {\n    return _react.default.createElement(_reactNative.View, {\n      style: styles.item,\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, _react.default.createElement(_FontAwesome.default, {\n      name: \"check-circle-o\",\n      size: 50,\n      color: \"#126FEA\",\n      style: styles.iconCalendar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }), _react.default.createElement(_reactNative.View, {\n      style: styles.infoItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, _react.default.createElement(_reactNative.Text, {\n      style: styles.itemBig,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, item.violationID), _react.default.createElement(_reactNative.Text, {\n      style: styles.itemBig,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, item.licplate), _react.default.createElement(_reactNative.Text, {\n      style: styles.itemBig,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, item.location), _react.default.createElement(_reactNative.Text, {\n      style: styles.itemBig,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, item.trigger), _react.default.createElement(_reactNative.Text, {\n      style: styles.itemSmall,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, item.createdTime)));\n  });\n\n  var emptyContent = _react.default.createElement(_reactNative.Text, {\n    style: {\n      textAlign: 'center',\n      fontSize: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 24\n    }\n  }, _reactNativeI18nLocalize.i18n.t('noViolation'));\n\n  return _react.default.createElement(_reactNative.ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.main,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.setting,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.datePick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.dateText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('from'), \":\"), _react.default.createElement(_reactNative.View, {\n    style: styles.dateContain,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_FontAwesome.default, {\n    name: \"calendar\",\n    size: 23,\n    color: \"#126FEA\",\n    style: styles.iconCalendar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }), _react.default.createElement(_mDatePicker.default, {\n    onSelectDate: onDateFromchange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }))), _react.default.createElement(_reactNative.View, {\n    style: styles.datePick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.dateText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, _reactNativeI18nLocalize.i18n.t('to'), \":\"), _react.default.createElement(_reactNative.View, {\n    style: styles.dateContain,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_FontAwesome.default, {\n    name: \"calendar\",\n    size: 23,\n    color: \"#126FEA\",\n    style: styles.iconCalendar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }), _react.default.createElement(_mDatePicker.default, {\n    onSelectDate: onDateTochange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }))), _react.default.createElement(_reactNative.View, {\n    style: styles.getListBtnContain,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.TouchableOpacity, {\n    style: {\n      width: '100%'\n    },\n    activeOpacity: .5,\n    onPress: function onPress() {\n      return pressLoad();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.getButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, _reactNativeI18nLocalize.i18n.t('load')))))), _react.default.createElement(_reactNative.View, {\n    style: styles.divider,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_reactNative.View, {\n    style: styles.listContain,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, vioList == null ? emptyContent : contentList), loading && _react.default.createElement(_reactNative.View, {\n    style: styles.loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNativeIndicator.BubblesLoader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }))));\n};\n\nvar _default = History;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  main: {\n    flex: 1,\n    padding: 20,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    position: 'relative',\n    minHeight: _reactNative.Dimensions.get('window').height - 50\n  },\n  setting: {\n    width: '90%',\n    marginTop: 20\n  },\n  datePick: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 10\n  },\n  dateText: {\n    fontSize: 23,\n    width: '30%'\n  },\n  dateContain: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    width: '60%',\n    borderBottomWidth: 1,\n    borderBottomColor: 'grey'\n  },\n  iconCalendar: {\n    paddingTop: 3\n  },\n  getButton: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    height: 50,\n    backgroundColor: '#2974FA',\n    marginTop: 20,\n    width: '100%'\n  },\n  text: {\n    color: 'white',\n    fontSize: 23\n  },\n  divider: {\n    backgroundColor: 'grey',\n    height: 1,\n    width: '100%',\n    marginBottom: 20,\n    marginTop: 20\n  },\n  listContain: {\n    width: '100%'\n  },\n  item: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderRadius: 10,\n    backgroundColor: '#ccc',\n    padding: 5,\n    marginBottom: 10\n  },\n  infoItem: {\n    paddingLeft: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    width: _reactNative.Dimensions.get('window').width - 100\n  },\n  itemBig: {\n    fontSize: 18\n  },\n  itemSmall: {\n    fontSize: 15,\n    marginTop: 8\n  },\n  loading: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    backgroundColor: 'rgba(97, 97, 97, 0.2)',\n    paddingTop: _reactNative.Dimensions.get('window').height / 2\n  }\n});","map":{"version":3,"sources":["D:/Works/Workspace/Mobile/parkcheck-android-app-master/parkcheck-android-app-master/src/screens/History.js"],"names":["History","navigation","route","dateFrom","onDateFromchange","dateTo","onDateTochange","vioList","setVioList","loading","setLoading","temp","violationID","location","trigger","createdTime","loadFromServer","formData","FormData","append","params","clerk","split","reverse","join","fetch","method","body","then","response","json","showList","catch","error","console","log","failedConnect","data","length","Alert","alert","i18n","t","text","pressLoad","fromD","Date","toD","diff","getTime","contentList","map","item","index","styles","iconCalendar","infoItem","itemBig","licplate","itemSmall","emptyContent","textAlign","fontSize","main","setting","datePick","dateText","dateContain","getListBtnContain","width","getButton","divider","listContain","StyleSheet","create","flex","padding","display","flexDirection","alignItems","position","minHeight","Dimensions","get","height","marginTop","justifyContent","marginBottom","borderBottomWidth","borderBottomColor","paddingTop","borderRadius","backgroundColor","color","paddingLeft","left","right","top","bottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  ScrollView,\n  Dimensions\n} from 'react-native';\nimport { i18n } from 'react-native-i18n-localize';\nimport MyDatePicker from '../components/mDatePicker';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { BubblesLoader } from 'react-native-indicator';\nimport { MyFetch } from '../fetch';\n\nconst History = ({ navigation, route }) => {\n\n  const [dateFrom, onDateFromchange] = useState('');\n  const [dateTo, onDateTochange] = useState('');\n  const [vioList, setVioList] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const temp = {\n    violationID: '0300400903740',\n    location: 'Abendweg 1004 Lausanne street cannnde',\n    trigger: 'trigger temp',\n    createdTime: '11.08.2020 20:21'\n  }\n\n  const loadFromServer = () => {\n    setLoading(true);\n\n    const formData = new FormData();\n    formData.append('clerk', route.params.clerk);\n    formData.append('fromDate', dateFrom.split(\".\").reverse().join(\"-\"));\n    formData.append('toDate', dateTo.split(\".\").reverse().join(\"-\"));\n\n    MyFetch(50, fetch('http://150.95.129.109/wp-json/violation/history', {\n      method: 'POST',\n      body: formData\n    }))\n    .then((response) => response.json())\n    .then((json) => { showList(json); })\n    .catch((error) => {\n      console.log(error);\n      failedConnect();\n    })\n\n  }\n\n  const showList = (data) => {\n    setLoading(false);\n    if(data.vioList.length == 0)\n      setVioList(null);\n    else\n      setVioList(data.vioList);\n  }\n\n  const failedConnect = () => {\n    setLoading(false);\n\n    Alert.alert(\n      i18n.t('warn'),\n      i18n.t('not_connect_server'),\n      [{text: i18n.t('ok'), },]\n    );\n  }\n\n  const pressLoad = () => {\n    let fromD = new Date(dateFrom.split(\".\").reverse().join(\"-\"));\n    let toD = new Date(dateTo.split(\".\").reverse().join(\"-\"));\n    let diff = fromD.getTime() - toD.getTime();\n\n    if(diff > 0)\n      Alert.alert(\n        i18n.t('warn'),\n        i18n.t('check_date'),\n        [{ text: i18n.t('ok'), },]\n      );\n    else{\n      loadFromServer();\n    }\n  }\n\n\n  const contentList = vioList &&\n        vioList.map( (item, index) => \n        <View style={styles.item} key={index}>\n          <Icon name=\"check-circle-o\" size={50} color=\"#126FEA\" style={styles.iconCalendar} />\n          <View style={styles.infoItem}>\n            <Text style={styles.itemBig}>{item.violationID}</Text>\n            <Text style={styles.itemBig}>{item.licplate}</Text>\n            <Text style={styles.itemBig}>{item.location}</Text>\n            <Text style={styles.itemBig}>{item.trigger}</Text>\n            <Text style={styles.itemSmall}>{item.createdTime}</Text>\n          </View>\n        </View> )\n\n  const emptyContent = <Text style={{textAlign: 'center', fontSize: 20}}>{i18n.t('noViolation')}</Text>\n\n  return (\n    <ScrollView>\n      <View style={styles.main}>\n        <View style={styles.setting}>\n          <View style={styles.datePick}>\n            <Text style={styles.dateText}>\n              {i18n.t('from')}:\n            </Text >\n            <View style={styles.dateContain}>\n              <Icon name=\"calendar\" size={23} color=\"#126FEA\" style={styles.iconCalendar} />\n              <MyDatePicker onSelectDate={onDateFromchange}  />\n            </View>\n          </View>\n          <View style={styles.datePick}>\n            <Text style={styles.dateText}>\n              {i18n.t('to')}:\n            </Text>\n            <View style={styles.dateContain}>\n              <Icon name=\"calendar\" size={23} color=\"#126FEA\" style={styles.iconCalendar} />\n              <MyDatePicker onSelectDate={onDateTochange}  />\n            </View>\n          </View>\n          <View style={styles.getListBtnContain}>\n            <TouchableOpacity\n             style={{width: '100%'}}\n              activeOpacity={.5}\n              onPress={() => pressLoad()}\n            >\n              <View style={styles.getButton}>\n                <Text style={styles.text}>{i18n.t('load')}</Text>\n              </View>\n            </TouchableOpacity>\n          </View>\n        </View>\n        <View style={styles.divider}></View>\n        <View style={styles.listContain}>\n          { vioList == null ? \n            emptyContent :\n            contentList}\n        </View>\n        {loading &&\n          <View style={styles.loading}>\n            <BubblesLoader />\n          </View>\n        }\n      </View>\n    </ScrollView>\n  );\n}\n\nexport default History;\n\n\nconst styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    padding: 20,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    position: 'relative',\n    minHeight: Dimensions.get('window').height - 50\n  },\n  setting: {\n    width: '90%',\n    marginTop: 20\n  },\n  datePick: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 10\n  },\n  dateText: {\n    fontSize: 23,\n    width: '30%',\n  },\n  dateContain: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    width: '60%',\n    borderBottomWidth: 1,\n    borderBottomColor: 'grey'\n  },\n  iconCalendar: {\n    paddingTop: 3\n  },\n  getButton: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    height: 50,\n    backgroundColor: '#2974FA',\n    marginTop: 20,\n    width: '100%',\n  },\n  text: {\n    color: 'white',\n    fontSize: 23\n  },\n  divider: {\n    backgroundColor: 'grey',\n    height: 1,\n    width: '100%',\n    marginBottom: 20,\n    marginTop: 20\n  },\n  listContain: {\n    width: '100%'\n  },\n  item: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderRadius: 10,\n    backgroundColor: '#ccc',\n    padding: 5,\n    marginBottom: 10\n  },\n  infoItem: {\n    paddingLeft: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    width: ( Dimensions.get('window').width - 100 ),\n  },\n  itemBig: {\n    fontSize: 18,\n  },\n  itemSmall: {\n    fontSize: 15,\n    marginTop: 8\n  },\n  loading: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    backgroundColor: 'rgba(97, 97, 97, 0.2)',\n    paddingTop: Dimensions.get('window').height/2\n  },\n});\n\n\n"]},"metadata":{},"sourceType":"script"}